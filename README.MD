# ðŸš€ YouTube Clone â€” Backend (Node.js Â· Express Â· MongoDB)

> A simple, backend for a YouTube-style app (Practice project)

---

### Highlights
- âœ… JWT-based auth with access + refresh tokens  
- âœ… Secure password hashing with `bcrypt`  
- âœ… Cloud media storage (Cloudinary) + `multer` upload flow  
- âœ… Clear API contract via `ApiResponse` / `ApiError` patterns  
- âœ… MongoDB models for Users, Subscriptions, Videos (extensible)  
- âœ… Middleware-friendly (auth, rate-limiting, validation-ready)

---

## Table of contents
- [Features](#features)  
- [Tech Stack](#tech-stack)  
- [Getting Started](#getting-started)  
- [Environment (.env) Example](#environment-env-example)  
- [Scripts](#scripts)  
- [Folder Structure](#folder-structure)  


---

## Features
- **Secure user auth** â€” register / login / logout flows, password hashing, role-ready.  
- **JWT access + refresh tokens** with middleware `VerifyJWT` for protected routes.  
- **Cloud media** â€” Cloudinary integration for avatars, covers, and video thumbnails.  
- **Efficient uploads** â€” `multer` for temporary uploads + cleanup to avoid disk bloat.  
- **Subscription model** â€” many-to-many relationships so users can subscribe to channels.  
- **Consistent API responses** â€” `ApiResponse` / `ApiError` classes for predictable client handling.  
- **Async safety** â€” `asyncHandler` to centralize async error bubbling.  
- **Extensible** â€” add streaming, comments, likes/dislikes, analytics easily.

---

## Tech stack
- **Runtime:** Node.js  
- **Web framework:** Express.js  
- **Database:** MongoDB (via Mongoose)  
- **Auth:** JWT, bcrypt  
- **File uploads:** multer â†’ Cloudinary  
- **Config:** dotenv  

---

## Getting started

### Requirements
- Node.js (>= 18 recommended)  
- npm or yarn  
- MongoDB instance / Atlas  
- Cloudinary account (for uploads)

### Quickstart
```bash
# clone
git clone <YOUR_REPO_URL>
cd <YOUR_REPO_NAME>

# install
npm install

# run (production)
npm start

# run (dev - auto reload)
npm run dev
```

Server runs by default at `http://localhost:8000` (if `PORT=8000`).

---

## Environment (`.env`) example
Create a `.env` file in the project root with the following (don't commit this):

```env
PORT=8000
MONGODB_URI=mongodb+srv://<user>:<pass>@cluster0.mongodb.net/your-db?retryWrites=true&w=majority
CORS_ORIGIN=*            # refine for prod
ACCESS_TOKEN_SECRET=<a-long-random-string>
REFRESH_TOKEN_SECRET=<another-long-random-string>

CLOUDINARY_CLOUD_NAME=<your-cloud-name>
CLOUDINARY_API_KEY=<your-api-key>
CLOUDINARY_API_SECRET=<your-api-secret>

# optional
NODE_ENV=development
```

> Tip: use a secrets manager in production (AWS Secrets Manager / Azure Key Vault / GitHub Secrets).

---

## Scripts
```json
{
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "lint": "eslint . --fix",
    "test": "jest --runInBand"
  }
}
```

---

## API Endpoints (examples)
> These are example routes â€” update them to match your actual router files.

### Auth
- `POST /api/v1/users/register` â€” Register new user  
  Request: `{ "username", "email", "password" }`  
  Response: `ApiResponse` with `accessToken`, `refreshToken`, `user`

- `POST /api/v1/users/login` â€” Login  
  Request: `{ "email", "password" }`

- `POST /api/v1/users/logout` â€” Logout (secure route)

### User
- `GET /api/v1/users/me` â€” Get current user (secure)
- `POST /api/v1/users/update/avatar` â€” Update avatar (secure, file upload)
- `PUT /api/v1/users/:id` â€” Update user profile (secure)

### Subscriptions
- `POST /api/v1/subscriptions/:channelId` â€” Subscribe to a channel (secure)
- `DELETE /api/v1/subscriptions/:channelId` â€” Unsubscribe (secure)
- `GET /api/v1/subscriptions/:userId` â€” Get subscriptions for user

### Example cURL (login)
```bash
curl -X POST http://localhost:8000/api/v1/users/login   -H "Content-Type: application/json"   -d '{"email":"you@example.com","password":"password123"}'
```


## Folder structure (recommended)
```
src/
â”œâ”€ controllers/
â”œâ”€ routes/
â”œâ”€ models/
â”œâ”€ middlewares/
â”‚  â”œâ”€ auth.js         # VerifyJWT
â”‚  â””â”€ asyncHandler.js
â”œâ”€ services/
â”‚  â””â”€ cloudinaryService.js
â”œâ”€ utils/
â”‚  â”œâ”€ ApiResponse.js
â”‚  â””â”€ ApiError.js
â”œâ”€ config/
â”‚  â””â”€ db.js
â””â”€ server.js
```

---

## Security & best practices
- **Never commit `.env`** â€” add it to `.gitignore`.  
- **Hash & salt passwords** with `bcrypt` (use a proper salt rounds count).  
- **Rotate secrets** periodically.  
- **Validate & sanitize** request payloads (use `Joi` or `express-validator`).  
- **Rate limit** authentication endpoints (e.g., `express-rate-limit`) to reduce brute force risk.  
- **Content type checks** for uploads. Limit allowed file sizes & types.  
- **Use HTTPS** in production, and set secure cookie flags for tokens if storing them in cookies.

---

## Contributing
Love contributions. Quick guide:
1. Fork the repo
2. Create a feature branch: `git checkout -b feat/awesome`
3. Code, add tests, run linter
4. Open a PR with a clear description and relevant tests

Please follow the repoâ€™s code style and include tests for new functionality.


## Contact
Created by **Aditya**

- Email: `saipremaditya@gmail.com`  
- GitHub: `github.com/Adityuhh11/`

